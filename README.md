# hsr-telegram-bot

## Описание

Telegram-бот для получения актуальных билдов персонажей Honkai: Star Rail с сайта prydwen.gg. Бот поддерживает выбор пути (элемента), персонажа и выдаёт подробный билд (реликвии, конусы, планарные украшения, характеристики).

## Запуск

1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Создайте файл `.env` в корне проекта и добавьте:
   ```
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   ADMIN_CHAT_ID=ваш_telegram_id (опционально, для команды /update)
   ```

3. Запустите бота:
   ```
   python bot.py
   ```

Или используйте Docker:
   ```
   docker-compose up --build
   ```

## Обновление кэша

- Кэш с данными парсится автоматически раз в сутки.
- Для ручного обновления используйте команду /update (только для администратора).

## Использование

- /start — начать диалог, выбрать путь и персонажа, получить билд.
- /cancel — отменить диалог.
- /update — обновить кэш (только для администратора).

## Структура кэша

Кэш хранится в `data/cache.json` в формате:
```
{
  "last_updated": "2024-06-10T12:00:00",
  "characters": [
    {
      "name": "Acheron",
      "path": "Nihility",
      "url": "/star-rail/characters/acheron",
      "build": { ... }
    },
    ...
  ]
}
```

## Важно
- Все данные берутся с сайта prydwen.gg/star-rail.
- Если структура сайта изменится, потребуется обновить парсер.
- Старый функционал (game8, builds_*.json) не используется.